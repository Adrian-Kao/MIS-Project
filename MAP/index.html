<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>Grasshopper Map Demo</title>
  <style>
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f5f2e8;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }

    .map-wrapper {
      position: relative;
      width: 404px;   /* 依照你的地圖大小調整 */
      height: 316px;  /* 依照你的地圖大小調整 */
      overflow: hidden;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    .map-wrapper img.map {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    /* 蚱蜢角色是絕對定位蓋在地圖上 */
    .map-wrapper img.hopper {
      position: absolute;
      width: 120px;              /* 依照圖大小調整 */
      transform: translate(-50%, -100%); 
      transition: left 0.5s ease, top 0.5s ease;
      pointer-events: none;
    }

    .controls {
      margin-top: 16px;
      display: flex;
      gap: 24px;
      align-items: center;
      justify-content: center;
    }

    .controls button {
      padding: 8px 20px;
      font-size: 24px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      background: #f2c14f;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }

    .controls button:active {
      transform: translateY(1px);
      box-shadow: 0 1px 3px rgba(0,0,0,0.2);
    }
  </style>
</head>
<body>
  <div class="map-wrapper">
    <!-- 地圖 -->
    <img class="map" src="map.jpg" alt="map" />

    <!-- 蚱蜢角色：初始顯示站立 -->
    <!-- 換成你的檔名：向左飛、站立、向右飛 -->
    <img
      id="hopper"
      class="hopper"
      src="standLeft.png"
      alt="hopper"
    />
  </div>

  <div class="controls">
    <button id="btnLeft">◀</button>
    <button id="btnRight">▶</button>
  </div>

  <script>
    // 三種狀態對應的圖
    const SPRITE_STAND   = "standLeft.png";   // 站立
    const SPRITE_LEFT    = "readyLeft.png";   // 向左飛
    const SPRITE_RIGHT   = "flyRight.png";    // 向右飛

    const hopper = document.getElementById("hopper");

    // ====== 標記點（依照地圖實際座標調整）======
    // 座標以「map-wrapper 左上角」為 (0,0)，單位是 px
    const points = [
      { x: 80,  y: 220 },   // 點 0
      { x: 150, y: 180 },   // 點 1
      { x: 230, y: 210 },   // 點 2
      { x: 310, y: 170 },   // 點 3
      { x: 340, y: 250 }    // 點 4
    ];

    let currentIndex = 0;
    let standTimer = null;

    function updatePosition() {
      const p = points[currentIndex];
      hopper.style.left = p.x + "px";
      hopper.style.top  = p.y + "px";
    }

    function move(dir) {
      const nextIndex = currentIndex + dir;
      if (nextIndex < 0 || nextIndex >= points.length) {
        return; // 超出範圍就不動
      }
      currentIndex = nextIndex;

      // 先換成飛行圖
      hopper.src = dir > 0 ? SPRITE_RIGHT : SPRITE_LEFT;

      // 移動到下一個標記點
      updatePosition();

      // 一段時間後回到站立
      if (standTimer) clearTimeout(standTimer);
      standTimer = setTimeout(() => {
        hopper.src = SPRITE_STAND;
      }, 750); // 0.25 秒後變回站立
    }

    document.getElementById("btnLeft").addEventListener("click", () => move(-1));
    document.getElementById("btnRight").addEventListener("click", () => move(1));

    // 初始位置
    window.addEventListener("load", updatePosition);
  </script>
</body>
</html>
